function cov_241tvlc2bv(){var path="/media/davio/5C40DBD240DBB0CE/Trybe/Trybe-Projetos/Projetos/sd-015-a-store-manager/controllers/salesControllers.js";var hash="848cef76ea5c63ec97fbbedb3fb8b85aa9a3568e";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/media/davio/5C40DBD240DBB0CE/Trybe/Trybe-Projetos/Projetos/sd-015-a-store-manager/controllers/salesControllers.js",statementMap:{"0":{start:{line:1,column:21},end:{line:1,column:55}},"1":{start:{line:3,column:17},end:{line:13,column:1}},"2":{start:{line:4,column:4},end:{line:12,column:3}},"3":{start:{line:5,column:19},end:{line:5,column:51}},"4":{start:{line:6,column:4},end:{line:8,column:5}},"5":{start:{line:7,column:6},end:{line:7,column:66}},"6":{start:{line:9,column:4},end:{line:9,column:40}},"7":{start:{line:11,column:2},end:{line:11,column:10}},"8":{start:{line:15,column:18},end:{line:26,column:1}},"9":{start:{line:16,column:2},end:{line:25,column:3}},"10":{start:{line:17,column:19},end:{line:17,column:29}},"11":{start:{line:18,column:19},end:{line:18,column:57}},"12":{start:{line:19,column:4},end:{line:21,column:5}},"13":{start:{line:20,column:6},end:{line:20,column:65}},"14":{start:{line:22,column:4},end:{line:22,column:40}},"15":{start:{line:24,column:4},end:{line:24,column:12}},"16":{start:{line:28,column:16},end:{line:44,column:1}},"17":{start:{line:29,column:2},end:{line:43,column:3}},"18":{start:{line:30,column:27},end:{line:30,column:62}},"19":{start:{line:31,column:25},end:{line:31,column:39}},"20":{start:{line:32,column:4},end:{line:34,column:8}},"21":{start:{line:33,column:6},end:{line:33,column:79}},"22":{start:{line:35,column:4},end:{line:40,column:7}},"23":{start:{line:42,column:4},end:{line:42,column:12}},"24":{start:{line:46,column:26},end:{line:63,column:1}},"25":{start:{line:47,column:2},end:{line:62,column:3}},"26":{start:{line:48,column:19},end:{line:48,column:29}},"27":{start:{line:49,column:36},end:{line:49,column:47}},"28":{start:{line:50,column:4},end:{line:50,column:66}},"29":{start:{line:51,column:4},end:{line:59,column:7}},"30":{start:{line:61,column:4},end:{line:61,column:12}},"31":{start:{line:65,column:0},end:{line:70,column:2}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:3,column:17},end:{line:3,column:18}},loc:{start:{line:3,column:44},end:{line:13,column:1}},line:3},"1":{name:"(anonymous_1)",decl:{start:{line:15,column:18},end:{line:15,column:19}},loc:{start:{line:15,column:44},end:{line:26,column:1}},line:15},"2":{name:"(anonymous_2)",decl:{start:{line:28,column:16},end:{line:28,column:17}},loc:{start:{line:28,column:42},end:{line:44,column:1}},line:28},"3":{name:"(anonymous_3)",decl:{start:{line:32,column:35},end:{line:32,column:36}},loc:{start:{line:32,column:70},end:{line:34,column:5}},line:32},"4":{name:"(anonymous_4)",decl:{start:{line:46,column:26},end:{line:46,column:27}},loc:{start:{line:46,column:52},end:{line:63,column:1}},line:46}},branchMap:{"0":{loc:{start:{line:6,column:4},end:{line:8,column:5}},type:"if",locations:[{start:{line:6,column:4},end:{line:8,column:5}},{start:{line:6,column:4},end:{line:8,column:5}}],line:6},"1":{loc:{start:{line:19,column:4},end:{line:21,column:5}},type:"if",locations:[{start:{line:19,column:4},end:{line:21,column:5}},{start:{line:19,column:4},end:{line:21,column:5}}],line:19}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0},b:{"0":[0,0],"1":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"848cef76ea5c63ec97fbbedb3fb8b85aa9a3568e"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_241tvlc2bv=function(){return actualCoverage;};}return actualCoverage;}cov_241tvlc2bv();const salesService=(cov_241tvlc2bv().s[0]++,require('../services/saleService'));cov_241tvlc2bv().s[1]++;const allSales=async(_req,res,next)=>{cov_241tvlc2bv().f[0]++;cov_241tvlc2bv().s[2]++;try{const result=(cov_241tvlc2bv().s[3]++,await salesService.getAllSales());cov_241tvlc2bv().s[4]++;if(!result){cov_241tvlc2bv().b[0][0]++;cov_241tvlc2bv().s[5]++;return res.status(404).json({message:'Sales not found'});}else{cov_241tvlc2bv().b[0][1]++;}cov_241tvlc2bv().s[6]++;return res.status(200).json(result);}catch(e){cov_241tvlc2bv().s[7]++;next(e);}};cov_241tvlc2bv().s[8]++;const salesByID=async(req,res,next)=>{cov_241tvlc2bv().f[1]++;cov_241tvlc2bv().s[9]++;try{const{id}=(cov_241tvlc2bv().s[10]++,req.params);const result=(cov_241tvlc2bv().s[11]++,await salesService.getAllSalesByID(id));cov_241tvlc2bv().s[12]++;if(!result.length){cov_241tvlc2bv().b[1][0]++;cov_241tvlc2bv().s[13]++;return res.status(404).json({message:'Sale not found'});}else{cov_241tvlc2bv().b[1][1]++;}cov_241tvlc2bv().s[14]++;return res.status(200).json(result);}catch(e){cov_241tvlc2bv().s[15]++;next(e);}};cov_241tvlc2bv().s[16]++;const newSale=async(req,res,next)=>{cov_241tvlc2bv().f[2]++;cov_241tvlc2bv().s[17]++;try{const createSaleInBD=(cov_241tvlc2bv().s[18]++,await salesService.newSaleService());const{insertId}=(cov_241tvlc2bv().s[19]++,createSaleInBD);cov_241tvlc2bv().s[20]++;await Promise.all(req.body.map(async({productId,quantity})=>{cov_241tvlc2bv().f[3]++;cov_241tvlc2bv().s[21]++;await salesService.newSalesProductService(insertId,productId,quantity);}));cov_241tvlc2bv().s[22]++;return res.status(201).json({id:insertId,itemsSold:[...req.body]});}catch(e){cov_241tvlc2bv().s[23]++;next(e);}};cov_241tvlc2bv().s[24]++;const updateSalesContro=async(req,res,next)=>{cov_241tvlc2bv().f[4]++;cov_241tvlc2bv().s[25]++;try{const{id}=(cov_241tvlc2bv().s[26]++,req.params);const{productId,quantity}=(cov_241tvlc2bv().s[27]++,req.body[0]);cov_241tvlc2bv().s[28]++;await salesService.updateSaleService(productId,quantity,id);cov_241tvlc2bv().s[29]++;return res.status(200).json({saleId:id,itemUpdated:[{productId,quantity}]});}catch(e){cov_241tvlc2bv().s[30]++;next(e);}};cov_241tvlc2bv().s[31]++;module.exports={allSales,salesByID,updateSalesContro,newSale};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNhbGVzQ29udHJvbGxlcnMuanMiXSwibmFtZXMiOlsic2FsZXNTZXJ2aWNlIiwicmVxdWlyZSIsImFsbFNhbGVzIiwiX3JlcSIsInJlcyIsIm5leHQiLCJyZXN1bHQiLCJnZXRBbGxTYWxlcyIsInN0YXR1cyIsImpzb24iLCJtZXNzYWdlIiwiZSIsInNhbGVzQnlJRCIsInJlcSIsImlkIiwicGFyYW1zIiwiZ2V0QWxsU2FsZXNCeUlEIiwibGVuZ3RoIiwibmV3U2FsZSIsImNyZWF0ZVNhbGVJbkJEIiwibmV3U2FsZVNlcnZpY2UiLCJpbnNlcnRJZCIsIlByb21pc2UiLCJhbGwiLCJib2R5IiwibWFwIiwicHJvZHVjdElkIiwicXVhbnRpdHkiLCJuZXdTYWxlc1Byb2R1Y3RTZXJ2aWNlIiwiaXRlbXNTb2xkIiwidXBkYXRlU2FsZXNDb250cm8iLCJ1cGRhdGVTYWxlU2VydmljZSIsInNhbGVJZCIsIml0ZW1VcGRhdGVkIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6Ijh3SEFlWTsyRkFmWixLQUFNQSxDQUFBQSxZQUFZLDBCQUFHQyxPQUFPLENBQUMseUJBQUQsQ0FBVixDQUFsQixDLHdCQUVBLEtBQU1DLENBQUFBLFFBQVEsQ0FBRyxNQUFPQyxJQUFQLENBQWFDLEdBQWIsQ0FBa0JDLElBQWxCLEdBQTJCLGlEQUN4QyxHQUFJLENBQ0osS0FBTUMsQ0FBQUEsTUFBTSwwQkFBRyxLQUFNTixDQUFBQSxZQUFZLENBQUNPLFdBQWIsRUFBVCxDQUFaLENBREksd0JBRUosR0FBSSxDQUFDRCxNQUFMLENBQWEsb0RBQ1gsTUFBT0YsQ0FBQUEsR0FBRyxDQUFDSSxNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUIsQ0FBRUMsT0FBTyxDQUFFLGlCQUFYLENBQXJCLENBQVAsQ0FDRCxDQUZELGlDQUZJLHdCQUtKLE1BQU9OLENBQUFBLEdBQUcsQ0FBQ0ksTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCSCxNQUFyQixDQUFQLENBQ0Qs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a0IsaUJBSGUsQ0FJZlosT0FKZSxDQUFqQiIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHNhbGVzU2VydmljZSA9IHJlcXVpcmUoJy4uL3NlcnZpY2VzL3NhbGVTZXJ2aWNlJyk7XG5cbmNvbnN0IGFsbFNhbGVzID0gYXN5bmMgKF9yZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIHRyeSB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2FsZXNTZXJ2aWNlLmdldEFsbFNhbGVzKCk7XG4gICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICdTYWxlcyBub3QgZm91bmQnIH0pO1xuICAgIH1cbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24ocmVzdWx0KTsgXG4gIH0gY2F0Y2ggKGUpIHtcbiAgbmV4dChlKTtcbiAgfVxufTtcblxuY29uc3Qgc2FsZXNCeUlEID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBpZCB9ID0gcmVxLnBhcmFtcztcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzYWxlc1NlcnZpY2UuZ2V0QWxsU2FsZXNCeUlEKGlkKTtcbiAgICBpZiAoIXJlc3VsdC5sZW5ndGgpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICdTYWxlIG5vdCBmb3VuZCcgfSk7XG4gICAgfVxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihyZXN1bHQpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgbmV4dChlKTtcbiAgfVxufTtcblxuY29uc3QgbmV3U2FsZSA9IGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IGNyZWF0ZVNhbGVJbkJEID0gYXdhaXQgc2FsZXNTZXJ2aWNlLm5ld1NhbGVTZXJ2aWNlKCk7XG4gICAgY29uc3QgeyBpbnNlcnRJZCB9ID0gY3JlYXRlU2FsZUluQkQ7XG4gICAgYXdhaXQgUHJvbWlzZS5hbGwocmVxLmJvZHkubWFwKGFzeW5jICh7IHByb2R1Y3RJZCwgcXVhbnRpdHkgfSkgPT4ge1xuICAgICAgYXdhaXQgc2FsZXNTZXJ2aWNlLm5ld1NhbGVzUHJvZHVjdFNlcnZpY2UoaW5zZXJ0SWQsIHByb2R1Y3RJZCwgcXVhbnRpdHkpO1xuICAgIH0pKTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDEpLmpzb24oe1xuICAgICAgaWQ6IGluc2VydElkLFxuICAgICAgaXRlbXNTb2xkOiBbXG4gICAgICAgIC4uLnJlcS5ib2R5LFxuICAgICAgXSxcbiAgICB9KTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIG5leHQoZSk7XG4gIH1cbn07XG5cbmNvbnN0IHVwZGF0ZVNhbGVzQ29udHJvID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBpZCB9ID0gcmVxLnBhcmFtcztcbiAgICBjb25zdCB7IHByb2R1Y3RJZCwgcXVhbnRpdHkgfSA9IHJlcS5ib2R5WzBdO1xuICAgIGF3YWl0IHNhbGVzU2VydmljZS51cGRhdGVTYWxlU2VydmljZShwcm9kdWN0SWQsIHF1YW50aXR5LCBpZCk7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICAgIHNhbGVJZDogaWQsXG4gICAgICBpdGVtVXBkYXRlZDogW1xuICAgICAgICB7XG4gICAgICAgICAgcHJvZHVjdElkLFxuICAgICAgICAgIHF1YW50aXR5LFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICB9KTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIG5leHQoZSk7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBhbGxTYWxlcyxcbiAgc2FsZXNCeUlELFxuICB1cGRhdGVTYWxlc0NvbnRybyxcbiAgbmV3U2FsZSxcbn07Il19